{% load static %}
<!DOCTYPE html>
<html lang="pt-BR" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mercado da Clara & Rennan</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

    <style>
        /* --- Fundo e container --- */
        body {
            background: radial-gradient(circle at top, #2b2d31 0%, #181a1b 100%);
            color: #e8e8e8;
            min-height: 100vh;
            font-family: "Segoe UI", system-ui, sans-serif;
        }
        .container {
            max-width: 720px;
        }

        /* --- Título principal --- */
        h1 {
            font-weight: 700;
            color: #f8f9fa;
        }
        .bi-cart4 {
            animation: pulse 2.2s infinite ease-in-out;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.15); opacity: 0.8; }
        }

        /* --- Cards de lista --- */
        .list-group-item {
            border-radius: 8px;
            margin-bottom: 8px;
            background-color: #1e1f22;
            border: 1px solid #2b2d31;
            transition: all 0.2s ease;
        }
        .list-group-item:hover {
            background-color: #2a2b30;
            transform: scale(1.01);
            box-shadow: 0 2px 6px rgba(0,0,0,0.25);
        }

        /* --- Botões com ícones --- */
        .btn-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            border-radius: 6px;
            font-size: 1.1rem;
            transition: transform 0.15s ease, box-shadow 0.15s ease;
        }
        .btn-icon:hover {
            transform: scale(1.15);
            box-shadow: 0 0 6px rgba(255,255,255,0.3);
        }

        /* --- Ações e nome --- */
        .actions {
            display: flex;
            flex-wrap: nowrap !important;
            gap: 8px;
            justify-content: flex-end;
        }
        .item-nome {
            flex: 1;
            font-weight: 500;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        /* --- Cabeçalhos com ícones e separadores --- */
        h3 {
            font-weight: 600;
        }
        h3 i {
            font-size: 1.3rem;
        }
        hr {
            height: 1px;
            background-color: currentColor;
        }
    </style>
</head>
<body>
    <div class="container mt-4">

        <!-- Cabeçalho -->
        <h1 class="text-center mb-3">
            <i class="bi bi-cart4 me-2 text-success"></i>
            Mercado da Clara & Rennan
            <i class="bi bi-cart4 ms-2 text-success"></i>
        </h1>
        <p class="text-center text-muted mb-5">
            Para facilitar a organização das nossas compras. <span class="text-danger">❤️</span>
        </p>

        <!-- Imagem --> 
        <div class="text-center my-4">
            <img src="{% static 'img/rennan-clara3.png' %}" 
                alt="Clara e Rennan"
                class="rounded-circle shadow"
                width="200" height="200"
                style="object-fit: cover;">
        </div>

        <!-- Filtro de Ordenação -->
        <form method="get" class="mb-4 text-end">
            <label for="ordem" class="me-2 fw-semibold">Ordenar por:</label>
            <select name="ordem" id="ordem" class="form-select d-inline-block w-auto" onchange="this.form.submit()">
                <option value="nome" {% if ordem == 'nome' %}selected{% endif %}>A → Z</option>
                <option value="-nome" {% if ordem == '-nome' %}selected{% endif %}>Z → A</option>
                <option value="recentes" {% if ordem == 'recentes' %}selected{% endif %}>Mais recentes</option>
                <option value="antigos" {% if ordem == 'antigos' %}selected{% endif %}>Mais antigos</option>
            </select>
        </form>

        <!-- Itens Pendentes -->
        <h3 class="text-danger d-flex align-items-center mb-3">
            <i class="bi bi-bag-x-fill me-2"></i> Itens Pendentes
            <hr class="flex-grow-1 ms-3 opacity-25">
        </h3>

        <ul class="list-group mb-4">
            {% for item in pendentes %}
                <li class="list-group-item d-flex align-items-center justify-content-between">
                    <span class="item-nome">{{ item.nome }}</span>
                    <div class="actions">
                        <a href="{% url 'editar_item' item.id %}" class="btn btn-sm btn-primary btn-icon" title="Editar">
                            <i class="bi bi-pencil-square"></i>
                        </a>
                        <a href="{% url 'excluir_item' item.id %}" class="btn btn-sm btn-danger btn-icon" title="Excluir">
                            <i class="bi bi-trash"></i>
                        </a>
                        <a href="{% url 'adicionar_carrinho' item.id %}" class="btn btn-sm btn-success btn-icon" title="Adicionar ao Carrinho">
                            <i class="bi bi-cart-plus"></i>
                        </a>
                    </div>
                </li>
            {% empty %}
                <li class="list-group-item text-muted">Nenhum item pendente.</li>
            {% endfor %}
        </ul>

        <!-- Itens no Carrinho -->
        <h3 class="text-success d-flex align-items-center mb-3">
            <i class="bi bi-bag-check-fill me-2"></i> Itens no Carrinho
            <hr class="flex-grow-1 ms-3 opacity-25">
        </h3>

        <ul class="list-group mb-4">
            {% for item in carrinho %}
                <li class="list-group-item d-flex align-items-center justify-content-between">
                    <span class="item-nome">{{ item.nome }}</span>
                    <div class="actions">
                        <a href="{% url 'editar_item' item.id %}" class="btn btn-sm btn-primary btn-icon" title="Editar">
                            <i class="bi bi-pencil-square"></i>
                        </a>
                        <a href="{% url 'excluir_item' item.id %}" class="btn btn-sm btn-danger btn-icon" title="Excluir">
                            <i class="bi bi-trash"></i>
                        </a>
                        <a href="{% url 'remover_carrinho' item.id %}" class="btn btn-sm btn-secondary btn-icon" title="Remover do Carrinho">
                            <i class="bi bi-cart-dash"></i>
                        </a>
                    </div>
                </li>
            {% empty %}
                <li class="list-group-item text-muted">Nenhum item no carrinho.</li>
            {% endfor %}
        </ul>

        <!-- Botões de Adicionar Item e Limpar Carrinho -->
        <div class="text-center mb-5">
            <a href="{% url 'adicionar_item' %}" class="btn btn-outline-success btn-lg">
                <i class="bi bi-plus-lg"></i> Adicionar Item
            </a>
            <a href="{% url 'limpar_carrinho' %}" class="btn btn-outline-danger btn-lg ms-3">
                <i class="bi bi-cart-x"></i> Limpar Carrinho
            </a>
        </div>    
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
